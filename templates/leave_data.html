<form method="get" action="{% url 'leave_data' %}">
    <label for="date">Search by Date:</label>
    <input type="date" id="date" name="date" placeholder="YYYY-MM-DD">
    <button type="submit">Search</button>
</form>

<h3>Or Search by Applicant:</h3>
<form method="get" action="{% url 'leave_data' %}">
    <label for="username">Applicant Username:</label>
    <input type="text" id="username" name="username" placeholder="Enter username">

    <label for="month">Month:</label>
    <input type="number" id="month" name="month" min="1" max="12" placeholder="Month (1-12)">

    <label for="year">Year:</label>
    <input type="number" id="year" name="year" placeholder="Year (e.g. 2025)">

    <button type="submit">Search</button>
</form>

{% if leaves %}
<h2>Leave Records:</h2>
<table>
    <thead>
        <tr>
            <th>Applicant</th>
            <th>Leave Type</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Duration</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% for leave in leaves %}
        <tr>
            <td>{{ leave.applicant.username }}</td>
            <td>{{ leave.leave_type }}</td>
            <td>{{ leave.start_date }}</td>
            <td>{{ leave.end_date }}</td>
            <td>{{ leave.duration }}</td>
            <td>{{ leave.status }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if applicant %}
<h3>Total Leave Days Of {{ applicant.username }}: {{ total_days }}</h3>
{% endif %} {% else %}
<p>No leave records found for the selected parameters.</p>
{% endif %}